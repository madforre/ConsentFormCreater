<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <style>

        ul, li {
            list-style: none;
        }

        ul {
            position : relative;
            top : 0px;
            left : 100px;
            width : 400px;
            height : auto;
            border : 1px solid rgb(2, 0, 7);
            display : flex;
            flex-wrap : wrap;
            flex-direction: row;
            padding : 0;
        }

        ul li {
            position : relative;
            box-sizing : border-box;
            border : 1px solid rgb(10, 0, 104);
            background: rgba(221, 221, 221, 0.719);
            flex : 1 1 auto;
            width : auto;
        }

        .resizer.column {
            position : absolute;
            right :-1px;
            top : 0px;
            width : 4%;
            height : 100%;
            background: #222;
            cursor :w-resize;
        }

        .resizer.row {
            position : absolute;
            bottom : -1px;
            width : 100%;
            height : 8%;
            background: #222;
            cursor :s-resize;
        }

    </style>
</head>
<body>
<div id="app">
    <input type="number" v-model="row" @click="table" @keyup="table" min="1" max="20">
    <input type="number" v-model="column" @click="table" @keyup="table" min="1" max="20">
    <hr>
    row : {{row}} <br>
    column : {{column}} <br>

    li 한 개당 width : {{width}} %<br>
    필요한 li 개수 : {{ row * column }}<br>
    <hr>
    <ul>
        <!-- 계산된 속성을 실행할 수 없는 중첩된 v-for는 메소드로 처리 -->
        <li v-for="n in li(row, column)">
            <div class="resizer column" v-show="n % row !== 0" @mousedown="colResize" @mouseup="stop"></div>
            <div class="resizer row" @mousedown="rowResize" @mouseup="stop"></div>
        </li>
    </ul>
</div>
<script>
    const vm = new Vue({
        el : "#app",
        data : {
            row : "",
            column : "",
        },
        computed : {
            width: function() {
                return 100 / this.row
            }
        },
        methods : {
            li : function (row,column) {
                return row * column;
            },
            table : function (event) {

                if (event.target.value.length <= 2){

                    let lis = document.querySelectorAll("ul > li");
                    let row = this.row;
                    // console.log(this.row);

                    for(i=0; i<lis.length; i++) {
                        lis[i].style.width = this.width+"%";
                        // lis[i].style.height = this.height+"%";
                        lis[i].style.height = "50px";
                        lis[i].setAttribute("class", i);
                    }
                }
            },
            rowResize : function (event) {

                let theClass = event.target.parentNode.getAttribute("class");
                let lis = document.querySelectorAll("ul > li");
                let row = this.row;
                let column = this.column;

                console.log(event.target)

                // event.target.parentNode.height = "10px";
                // event.target.innerHTML = "hi";

                // console.log(event.offsetY);
                // console.log(event.target.parentNode.height);

                event.target.addEventListener("mousemove", function(e) {

                    // console.log (event.offsetY);

                    console.log(event.target.parentNode);
                    // console.log(theClass);
                    // console.log(row);

                    // 케이스 분류
                    // row x 0 부터 row 전까지

                    function jaegui(row, column) {
                        // event.target.parentNode 
                    }
                })

                
                // let stop = function() {
                //     // e.preventDefault();
                // }
                // stop();

                //     // for (theClass; theClass<row; theClass++) {
                //     //     event.target.parentNode.style.height = event.target.parentNode.style.height + event.offsetY
                //     // }
                //     // row x 1 부터 row x 2 전까지
                //     // row x 2 부터 row x 3 전까지
                //     // row x 3 부터 row x 4 전까지
                //     // . . .
                //     // . . .
                //     // row x (column - 1) 부터 row x column 전까지

                //     // for (theClass; theClass<row; theClass++) {
                //     // }
                //     // console.log (event.target.style.height);

                // })

                // console.log(event.target)
                // return console.log("rowResize")
            },
            colResize : function () {
                return console.log("colResize")
            },
            stop : function() {
                // window.removeEventListener('mousemove')
            },
        },
        beforeUpdate() {

            if (this.row.length > 2) {
                let cut = String(this.row);
                cut = cut.slice(0,-1);
                cut = cut.slice(0, 2);
                this.row = parseInt(cut)
            }

            if (this.column.length > 2) {
                let cut = String(this.column);
                cut = cut.slice(0,-1);
                cut = cut.slice(0, 2);
                this.column = parseInt(cut)
            }
        }
    })
    </script>
</body>
</html>